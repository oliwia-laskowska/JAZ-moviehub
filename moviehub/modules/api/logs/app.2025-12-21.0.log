2025-12-21 11:57:56.053 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 1208 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 11:57:56.058 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 11:57:56.058 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 11:57:56.482 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 11:57:56.515 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 7 JPA repository interfaces.
2025-12-21 11:57:57.229 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 11:57:57.241 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 11:57:57.245 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 11:57:57.246 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 11:57:57.300 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 11:57:57.300 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1218 ms
2025-12-21 11:57:57.591 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 11:57:57.635 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 11:57:57.680 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 11:57:57.859 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 11:57:57.877 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 11:57:57.959 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@58ac0823
2025-12-21 11:57:57.960 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 11:57:58.579 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 11:57:58.643 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 11:57:59.697 INFO  [main] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-21 11:57:59.698 WARN  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-21 11:57:59.820 INFO  [main] o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-12-21 11:58:00.029 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-12-21 11:58:01.482 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-21 11:58:01.491 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-12-21 11:58:01.493 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-12-21 11:58:01.493 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@59960ae9]]
2025-12-21 11:58:01.493 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-12-21 11:58:01.503 INFO  [main] c.e.moviehub.api.MoviehubApplication - Started MoviehubApplication in 5.797 seconds (process running for 6.023)
2025-12-21 11:58:01.898 INFO  [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-21 11:58:01.898 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-21 11:58:01.899 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-12-21 11:58:03.466 INFO  [main] c.e.moviehub.service.SyncService - Sync finished: 22 movies upserted
2025-12-21 11:58:31.938 INFO  [MessageBroker-1] c.e.moviehub.service.SyncService - Sync finished: 22 movies upserted
2025-12-21 11:58:31.978 INFO  [MessageBroker-1] c.e.m.s.scheduler.MovieSyncScheduler - Scheduled sync OK, upserts=22
2025-12-21 11:59:01.469 INFO  [MessageBroker-2] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 1, completed tasks = 1]
2025-12-21 12:29:01.443 INFO  [MessageBroker-3] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 1, completed tasks = 2]
2025-12-21 12:53:01.517 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 3983 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 12:53:01.518 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 12:53:01.518 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 12:53:01.795 WARN  [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'externalMovieClient' defined in com.example.moviehub.api.MoviehubApplication: Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=moviehubApplication; factoryMethodName=externalMovieClient; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in com.example.moviehub.api.MoviehubApplication] for bean 'externalMovieClient' since there is already [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=externalClientConfig; factoryMethodName=externalMovieClient; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]] bound.
2025-12-21 12:53:01.801 INFO  [main] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-21 12:53:01.815 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'externalMovieClient', defined in com.example.moviehub.api.MoviehubApplication, could not be registered. A bean with that name has already been defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class] and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

2025-12-21 12:55:35.101 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 4111 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 12:55:35.102 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 12:55:35.103 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 12:55:35.387 WARN  [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'externalMovieClient' defined in com.example.moviehub.api.MoviehubApplication: Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=moviehubApplication; factoryMethodName=externalMovieClient; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in com.example.moviehub.api.MoviehubApplication] for bean 'externalMovieClient' since there is already [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=externalClientConfig; factoryMethodName=externalMovieClient; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]] bound.
2025-12-21 12:55:35.393 INFO  [main] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-21 12:55:35.409 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'externalMovieClient', defined in com.example.moviehub.api.MoviehubApplication, could not be registered. A bean with that name has already been defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class] and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

2025-12-21 12:58:33.033 INFO  [MessageBroker-1] c.e.moviehub.service.SyncService - Sync finished: 22 movies upserted
2025-12-21 12:58:33.060 INFO  [MessageBroker-1] c.e.m.s.scheduler.MovieSyncScheduler - Scheduled sync OK, upserts=22
2025-12-21 12:59:01.440 INFO  [MessageBroker-2] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 6, active threads = 1, queued tasks = 1, completed tasks = 4]
2025-12-21 13:11:56.760 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 4809 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:11:56.761 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:11:56.761 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:11:57.041 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:11:57.074 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 7 JPA repository interfaces.
2025-12-21 13:11:57.629 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:11:57.635 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:11:57.637 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:11:57.637 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:11:57.702 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:11:57.703 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 921 ms
2025-12-21 13:11:57.898 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:11:57.929 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:11:57.945 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:11:58.081 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:11:58.094 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:11:58.145 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@2bc8caa7
2025-12-21 13:11:58.146 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:11:58.615 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:11:58.702 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:11:58.729 WARN  [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminPageController' defined in file [/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main/com/example/moviehub/api/controller/mvc/AdminPageController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'syncService' defined in URL [jar:file:/Users/oliwia/Downloads/moviehub/modules/service/build/libs/service-0.1.0.jar!/com/example/moviehub/service/SyncService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'externalMovieClient' defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]: Unsatisfied dependency expressed through method 'externalMovieClient' parameter 0: No qualifying bean of type 'org.springframework.web.client.RestClient' available: expected single matching bean but found 2: ghibliRestClient,tmdbRestClient
2025-12-21 13:11:58.729 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:11:58.730 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:11:58.733 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:11:58.734 INFO  [main] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-21 13:11:58.744 INFO  [main] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-21 13:11:58.751 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method externalMovieClient in com.example.moviehub.integration.config.ExternalClientConfig required a single bean, but 2 were found:
	- ghibliRestClient: defined by method 'ghibliRestClient' in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]
	- tmdbRestClient: defined by method 'tmdbRestClient' in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]

This may be due to missing parameter name information

Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

Ensure that your compiler is configured to use the '-parameters' flag.
You may need to update both your build tool settings as well as your IDE.
(See https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention)


2025-12-21 13:12:08.523 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 4868 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:12:08.526 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:12:08.526 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:12:08.801 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:12:08.829 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 23 ms. Found 7 JPA repository interfaces.
2025-12-21 13:12:09.374 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:12:09.379 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:12:09.382 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:12:09.382 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:12:09.411 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:12:09.412 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 865 ms
2025-12-21 13:12:09.586 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:12:09.615 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:12:09.630 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:12:09.769 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:12:09.783 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:12:09.838 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@288b73c1
2025-12-21 13:12:09.839 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:12:10.456 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:12:10.566 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:12:10.596 WARN  [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminPageController' defined in file [/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main/com/example/moviehub/api/controller/mvc/AdminPageController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'syncService' defined in URL [jar:file:/Users/oliwia/Downloads/moviehub/modules/service/build/libs/service-0.1.0.jar!/com/example/moviehub/service/SyncService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'externalMovieClient' defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]: Unsatisfied dependency expressed through method 'externalMovieClient' parameter 0: No qualifying bean of type 'org.springframework.web.client.RestClient' available: expected single matching bean but found 2: ghibliRestClient,tmdbRestClient
2025-12-21 13:12:10.596 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:12:10.599 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:12:10.605 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:12:10.607 INFO  [main] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-21 13:12:10.619 INFO  [main] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-21 13:12:10.627 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method externalMovieClient in com.example.moviehub.integration.config.ExternalClientConfig required a single bean, but 2 were found:
	- ghibliRestClient: defined by method 'ghibliRestClient' in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]
	- tmdbRestClient: defined by method 'tmdbRestClient' in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]

This may be due to missing parameter name information

Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

Ensure that your compiler is configured to use the '-parameters' flag.
You may need to update both your build tool settings as well as your IDE.
(See https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention)


2025-12-21 13:13:00.208 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 4940 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:13:00.211 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:13:00.211 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:13:00.502 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:13:00.530 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 7 JPA repository interfaces.
2025-12-21 13:13:01.069 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:13:01.075 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:13:01.077 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:13:01.077 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:13:01.102 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:13:01.102 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 869 ms
2025-12-21 13:13:01.274 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:13:01.315 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:13:01.331 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:13:01.470 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:13:01.483 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:13:01.531 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@58ac0823
2025-12-21 13:13:01.532 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:13:01.997 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:13:02.061 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:13:02.084 WARN  [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminPageController' defined in file [/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main/com/example/moviehub/api/controller/mvc/AdminPageController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'syncService' defined in URL [jar:file:/Users/oliwia/Downloads/moviehub/modules/service/build/libs/service-0.1.0.jar!/com/example/moviehub/service/SyncService.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'externalMovieClient' defined in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]: Unsatisfied dependency expressed through method 'externalMovieClient' parameter 0: No qualifying bean of type 'org.springframework.web.client.RestClient' available: expected single matching bean but found 2: ghibliRestClient,tmdbRestClient
2025-12-21 13:13:02.084 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:13:02.086 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:13:02.091 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:13:02.092 INFO  [main] o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-12-21 13:13:02.101 INFO  [main] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-21 13:13:02.110 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method externalMovieClient in com.example.moviehub.integration.config.ExternalClientConfig required a single bean, but 2 were found:
	- ghibliRestClient: defined by method 'ghibliRestClient' in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]
	- tmdbRestClient: defined by method 'tmdbRestClient' in class path resource [com/example/moviehub/integration/config/ExternalClientConfig.class]

This may be due to missing parameter name information

Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed

Ensure that your compiler is configured to use the '-parameters' flag.
You may need to update both your build tool settings as well as your IDE.
(See https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention)


2025-12-21 13:15:06.769 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 5045 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:15:06.773 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:15:06.774 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:15:07.055 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:15:07.083 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 7 JPA repository interfaces.
2025-12-21 13:15:07.623 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:15:07.629 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:15:07.632 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:15:07.632 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:15:07.656 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:15:07.656 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 860 ms
2025-12-21 13:15:07.893 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:15:07.925 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:15:07.941 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:15:08.083 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:15:08.099 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:15:08.147 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@4d770bcd
2025-12-21 13:15:08.148 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:15:08.623 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:15:08.675 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:15:09.231 INFO  [main] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-21 13:15:09.231 WARN  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-21 13:15:09.313 INFO  [main] o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-12-21 13:15:09.479 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-12-21 13:15:09.863 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-21 13:15:09.866 WARN  [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-12-21 13:15:09.868 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:15:09.869 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:15:09.875 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:15:09.886 INFO  [main] o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-21 13:15:09.893 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-12-21 13:18:32.443 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 5243 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:18:32.446 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:18:32.446 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:18:32.732 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:18:32.761 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 7 JPA repository interfaces.
2025-12-21 13:18:33.300 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:18:33.306 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:18:33.308 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:18:33.308 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:18:33.333 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:18:33.333 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 866 ms
2025-12-21 13:18:33.502 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:18:33.533 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:18:33.550 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:18:33.689 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:18:33.702 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:18:33.749 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@fe156f4
2025-12-21 13:18:33.750 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:18:34.207 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:18:34.260 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:18:34.819 INFO  [main] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-21 13:18:34.819 WARN  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-21 13:18:34.897 INFO  [main] o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-12-21 13:18:35.059 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-12-21 13:18:35.434 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-21 13:18:35.439 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-12-21 13:18:35.440 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-12-21 13:18:35.440 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@74a680d3]]
2025-12-21 13:18:35.440 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-12-21 13:18:35.448 INFO  [main] c.e.moviehub.api.MoviehubApplication - Started MoviehubApplication in 3.244 seconds (process running for 3.397)
2025-12-21 13:18:36.353 WARN  [main] o.m.jdbc.message.server.ErrorPacket - Error: 1062-23000: Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:18:36.354 WARN  [main] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-12-21 13:18:36.354 ERROR [main] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:18:36.359 WARN  [main] c.e.m.api.config.StartupDataConfig - Initial sync skipped/failed: could not execute statement [(conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'] [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]; constraint [idx_movie_external_id]
2025-12-21 13:18:49.693 INFO  [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-21 13:18:49.694 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-21 13:18:49.702 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2025-12-21 13:19:00.888 WARN  [http-nio-8080-exec-4] o.m.jdbc.message.server.ErrorPacket - Error: 1062-23000: Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:19:00.889 WARN  [http-nio-8080-exec-4] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-12-21 13:19:00.889 ERROR [http-nio-8080-exec-4] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:19:05.820 WARN  [MessageBroker-1] o.m.jdbc.message.server.ErrorPacket - Error: 1062-23000: Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:19:05.821 WARN  [MessageBroker-1] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-12-21 13:19:05.822 ERROR [MessageBroker-1] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:19:05.824 WARN  [MessageBroker-1] c.e.m.s.scheduler.MovieSyncScheduler - Scheduled sync FAILED: could not execute statement [(conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'] [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]; constraint [idx_movie_external_id]
org.springframework.dao.DataIntegrityViolationException: could not execute statement [(conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'] [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]; SQL [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]; constraint [idx_movie_external_id]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:290)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:165)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy164.save(Unknown Source)
	at com.example.moviehub.service.SyncService.syncFromInternet(SyncService.java:62)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.example.moviehub.service.SyncService$$SpringCGLIB$$0.syncFromInternet(<generated>)
	at com.example.moviehub.service.scheduler.MovieSyncScheduler.scheduledSync(MovieSyncScheduler.java:29)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [(conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'] [insert into movies (created_at,description,director,external_id,external_source,producer,release_year,rt_score,title,updated_at) values (?,?,?,?,?,?,?,?,?,?) returning id]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1243)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:145)
	at org.hibernate.id.insert.InsertReturningDelegate.executeAndExtractReturning(InsertReturningDelegate.java:96)
	at org.hibernate.id.insert.AbstractReturningDelegate.performMutation(AbstractReturningDelegate.java:58)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:47)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.doStaticInserts(InsertCoordinatorStandard.java:194)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.coordinateInsert(InsertCoordinatorStandard.java:132)
	at org.hibernate.persister.entity.mutation.InsertCoordinatorStandard.insert(InsertCoordinatorStandard.java:95)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:85)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:671)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:292)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:273)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:323)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:391)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:305)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:224)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:137)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:757)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:741)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:319)
	at jdk.proxy2/jdk.proxy2.$Proxy158.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:628)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:277)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:173)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 34 common frames omitted
Caused by: java.sql.SQLIntegrityConstraintViolationException: (conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:297)
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378)
	at org.mariadb.jdbc.client.result.Result.readNext(Result.java:206)
	at org.mariadb.jdbc.client.result.CompleteResult.<init>(CompleteResult.java:84)
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:339)
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235)
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174)
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093)
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017)
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101)
	at org.mariadb.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:237)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.execute(ResultSetReturnImpl.java:129)
	... 81 common frames omitted
2025-12-21 13:19:23.725 WARN  [http-nio-8080-exec-5] o.m.jdbc.message.server.ErrorPacket - Error: 1062-23000: Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:19:23.726 WARN  [http-nio-8080-exec-5] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1062, SQLState: 23000
2025-12-21 13:19:23.726 ERROR [http-nio-8080-exec-5] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=73) Duplicate entry '2baf70d1-42bb-4437-b551-e5fed5a87abe' for key 'idx_movie_external_id'
2025-12-21 13:19:35.436 INFO  [MessageBroker-2] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 1, completed tasks = 1]
2025-12-21 13:34:36.389 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-12-21 13:34:36.391 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@74a680d3]]
2025-12-21 13:34:36.391 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-12-21 13:34:36.416 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:34:36.430 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:34:36.445 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:34:43.078 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 6114 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:34:43.079 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:34:43.080 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:34:43.362 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:34:43.390 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 7 JPA repository interfaces.
2025-12-21 13:34:43.938 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:34:43.945 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:34:43.947 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:34:43.947 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:34:43.971 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:34:43.971 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 870 ms
2025-12-21 13:34:44.145 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:34:44.176 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:34:44.193 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:34:44.330 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:34:44.343 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:34:44.396 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@1cfa7ee0
2025-12-21 13:34:44.397 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:34:44.863 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:34:44.917 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:34:45.482 INFO  [main] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-21 13:34:45.482 WARN  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-21 13:34:45.566 INFO  [main] o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-12-21 13:34:45.727 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-12-21 13:34:46.106 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-21 13:34:46.111 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-12-21 13:34:46.112 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-12-21 13:34:46.112 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7daecd21]]
2025-12-21 13:34:46.112 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-12-21 13:34:46.122 INFO  [main] c.e.moviehub.api.MoviehubApplication - Started MoviehubApplication in 3.284 seconds (process running for 3.437)
2025-12-21 13:34:49.489 INFO  [main] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:34:49.690 INFO  [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-21 13:34:49.691 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-21 13:34:49.701 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-12-21 13:35:00.852 INFO  [http-nio-8080-exec-4] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:35:17.310 INFO  [MessageBroker-1] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:35:17.318 INFO  [MessageBroker-1] c.e.m.s.scheduler.MovieSyncScheduler - Scheduled sync OK, upserts=122
2025-12-21 13:35:46.118 INFO  [MessageBroker-2] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 1, completed tasks = 1]
2025-12-21 13:48:06.924 WARN  [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m22s322ms).
2025-12-21 13:50:05.642 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-12-21 13:50:05.644 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7daecd21]]
2025-12-21 13:50:05.644 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-12-21 13:50:05.669 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:50:05.677 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:50:05.693 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:50:08.503 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 6602 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:50:08.503 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:50:08.503 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:50:08.823 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:50:08.851 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 7 JPA repository interfaces.
2025-12-21 13:50:09.398 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:50:09.407 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:50:09.409 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:50:09.409 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:50:09.434 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:50:09.434 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 905 ms
2025-12-21 13:50:09.604 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:50:09.638 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:50:09.654 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:50:09.794 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:50:09.807 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:50:09.859 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@fe156f4
2025-12-21 13:50:09.860 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:50:10.348 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:50:10.401 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:50:10.972 INFO  [main] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-21 13:50:10.972 WARN  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-21 13:50:11.051 INFO  [main] o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-12-21 13:50:11.205 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-12-21 13:50:11.587 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-21 13:50:11.592 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-12-21 13:50:11.593 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-12-21 13:50:11.593 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@27dfd939]]
2025-12-21 13:50:11.593 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-12-21 13:50:11.601 INFO  [main] c.e.moviehub.api.MoviehubApplication - Started MoviehubApplication in 3.357 seconds (process running for 3.514)
2025-12-21 13:50:14.336 INFO  [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-21 13:50:14.336 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-21 13:50:14.339 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-12-21 13:50:18.370 INFO  [main] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:50:24.630 INFO  [http-nio-8080-exec-3] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:50:27.796 INFO  [http-nio-8080-exec-7] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:50:45.504 INFO  [MessageBroker-1] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:50:45.527 INFO  [MessageBroker-1] c.e.m.s.scheduler.MovieSyncScheduler - Scheduled sync OK, upserts=122
2025-12-21 13:51:11.596 INFO  [MessageBroker-2] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 1, completed tasks = 1]
2025-12-21 13:57:00.786 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-12-21 13:57:00.787 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@27dfd939]]
2025-12-21 13:57:00.787 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-12-21 13:57:00.809 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:57:00.814 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 13:57:00.824 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-12-21 13:57:07.154 INFO  [main] c.e.moviehub.api.MoviehubApplication - Starting MoviehubApplication using Java 21.0.9 with PID 6937 (/Users/oliwia/Downloads/moviehub/modules/api/build/classes/java/main started by oliwia in /Users/oliwia/Downloads/moviehub/modules/api)
2025-12-21 13:57:07.154 DEBUG [main] c.e.moviehub.api.MoviehubApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-12-21 13:57:07.154 INFO  [main] c.e.moviehub.api.MoviehubApplication - The following 1 profile is active: "local"
2025-12-21 13:57:07.444 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-21 13:57:07.476 INFO  [main] o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 7 JPA repository interfaces.
2025-12-21 13:57:08.029 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-21 13:57:08.035 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-12-21 13:57:08.037 INFO  [main] o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-21 13:57:08.037 INFO  [main] o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-12-21 13:57:08.062 INFO  [main] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-21 13:57:08.062 INFO  [main] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 886 ms
2025-12-21 13:57:08.230 INFO  [main] o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-21 13:57:08.261 INFO  [main] org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-12-21 13:57:08.277 INFO  [main] o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-12-21 13:57:08.415 INFO  [main] o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-21 13:57:08.428 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-12-21 13:57:08.479 INFO  [main] com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.mariadb.jdbc.Connection@62c46e53
2025-12-21 13:57:08.480 INFO  [main] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-12-21 13:57:08.985 INFO  [main] o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-21 13:57:09.039 INFO  [main] o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 13:57:09.638 INFO  [main] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-12-21 13:57:09.638 WARN  [main] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-12-21 13:57:09.718 INFO  [main] o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-12-21 13:57:09.877 INFO  [main] o.s.b.a.e.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-12-21 13:57:10.309 INFO  [main] o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-12-21 13:57:10.314 INFO  [main] o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-12-21 13:57:10.315 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-12-21 13:57:10.315 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@61defefb]]
2025-12-21 13:57:10.315 INFO  [main] o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-12-21 13:57:10.323 INFO  [main] c.e.moviehub.api.MoviehubApplication - Started MoviehubApplication in 3.415 seconds (process running for 3.583)
2025-12-21 13:57:12.202 INFO  [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-21 13:57:12.203 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-21 13:57:12.206 INFO  [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-12-21 13:58:10.310 INFO  [MessageBroker-2] o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-12-21 13:58:23.375 WARN  [http-nio-8080-exec-3] o.m.jdbc.message.server.ErrorPacket - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:23.385 WARN  [http-nio-8080-exec-3] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1205, SQLState: HY000
2025-12-21 13:58:23.385 ERROR [http-nio-8080-exec-3] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=105) Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:32.781 WARN  [http-nio-8080-exec-5] o.m.jdbc.message.server.ErrorPacket - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:32.789 WARN  [http-nio-8080-exec-5] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1205, SQLState: HY000
2025-12-21 13:58:32.789 ERROR [http-nio-8080-exec-5] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=106) Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:35.591 WARN  [MessageBroker-1] o.m.jdbc.message.server.ErrorPacket - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:35.592 WARN  [MessageBroker-1] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1205, SQLState: HY000
2025-12-21 13:58:35.592 ERROR [MessageBroker-1] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=107) Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:35.597 WARN  [MessageBroker-1] c.e.m.s.scheduler.MovieSyncScheduler - Scheduled sync FAILED: could not execute statement [(conn=107) Lock wait timeout exceeded; try restarting transaction] [update movies set description=?,director=?,external_id=?,external_source=?,producer=?,release_year=?,rt_score=?,title=?,updated_at=? where id=?]; SQL [update movies set description=?,director=?,external_id=?,external_source=?,producer=?,release_year=?,rt_score=?,title=?,updated_at=? where id=?]
org.springframework.dao.PessimisticLockingFailureException: could not execute statement [(conn=107) Lock wait timeout exceeded; try restarting transaction] [update movies set description=?,director=?,external_id=?,external_source=?,producer=?,release_year=?,rt_score=?,title=?,updated_at=? where id=?]; SQL [update movies set description=?,director=?,external_id=?,external_source=?,producer=?,release_year=?,rt_score=?,title=?,updated_at=? where id=?]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:160)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:136)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223)
	at jdk.proxy2/jdk.proxy2.$Proxy164.findByExternalSourceAndExternalId(Unknown Source)
	at com.example.moviehub.service.SyncService.syncFromInternet(SyncService.java:79)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:720)
	at com.example.moviehub.service.SyncService$$SpringCGLIB$$0.syncFromInternet(<generated>)
	at com.example.moviehub.service.scheduler.MovieSyncScheduler.scheduledSync(MovieSyncScheduler.java:29)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.PessimisticLockException: could not execute statement [(conn=107) Lock wait timeout exceeded; try restarting transaction] [update movies set description=?,director=?,external_id=?,external_source=?,producer=?,release_year=?,rt_score=?,title=?,updated_at=? where id=?]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1236)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.performNonBatchedMutation(AbstractMutationExecutor.java:134)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorSingleNonBatched.performNonBatchedOperations(MutationExecutorSingleNonBatched.java:55)
	at org.hibernate.engine.jdbc.mutation.internal.AbstractMutationExecutor.execute(AbstractMutationExecutor.java:55)
	at org.hibernate.persister.entity.mutation.UpdateCoordinatorStandard.doStaticUpdate(UpdateCoordinatorStandard.java:781)
	at org.hibernate.persister.entity.mutation.UpdateCoordinatorStandard.performUpdate(UpdateCoordinatorStandard.java:328)
	at org.hibernate.persister.entity.mutation.UpdateCoordinatorStandard.update(UpdateCoordinatorStandard.java:245)
	at org.hibernate.action.internal.EntityUpdateAction.execute(EntityUpdateAction.java:169)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:633)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:500)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:385)
	at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:66)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1375)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:138)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:382)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:302)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:526)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:423)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:555)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:152)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:140)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:169)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:148)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	... 34 common frames omitted
Caused by: java.sql.SQLException: (conn=107) Lock wait timeout exceeded; try restarting transaction
	at org.mariadb.jdbc.export.ExceptionFactory.createException(ExceptionFactory.java:306)
	at org.mariadb.jdbc.export.ExceptionFactory.create(ExceptionFactory.java:378)
	at org.mariadb.jdbc.message.ClientMessage.readPacket(ClientMessage.java:189)
	at org.mariadb.jdbc.client.impl.StandardClient.readPacket(StandardClient.java:1235)
	at org.mariadb.jdbc.client.impl.StandardClient.readResults(StandardClient.java:1174)
	at org.mariadb.jdbc.client.impl.StandardClient.readResponse(StandardClient.java:1093)
	at org.mariadb.jdbc.client.impl.StandardClient.execute(StandardClient.java:1017)
	at org.mariadb.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:101)
	at org.mariadb.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:313)
	at org.mariadb.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:290)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 68 common frames omitted
2025-12-21 13:58:39.745 WARN  [http-nio-8080-exec-7] o.m.jdbc.message.server.ErrorPacket - Error: 1205-HY000: Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:39.752 WARN  [http-nio-8080-exec-7] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1205, SQLState: HY000
2025-12-21 13:58:39.752 ERROR [http-nio-8080-exec-7] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=108) Lock wait timeout exceeded; try restarting transaction
2025-12-21 13:58:42.258 INFO  [main] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 13:58:42.261 WARN  [http-nio-8080-exec-9] o.m.jdbc.message.server.ErrorPacket - Error: 1020-HY000: Record has changed since last read in table 'movies'
2025-12-21 13:58:42.261 WARN  [http-nio-8080-exec-4] o.m.jdbc.message.server.ErrorPacket - Error: 1020-HY000: Record has changed since last read in table 'movies'
2025-12-21 13:58:42.261 WARN  [http-nio-8080-exec-8] o.m.jdbc.message.server.ErrorPacket - Error: 1020-HY000: Record has changed since last read in table 'movies'
2025-12-21 13:58:42.261 WARN  [http-nio-8080-exec-9] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1020, SQLState: HY000
2025-12-21 13:58:42.261 WARN  [http-nio-8080-exec-8] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1020, SQLState: HY000
2025-12-21 13:58:42.261 WARN  [http-nio-8080-exec-4] o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1020, SQLState: HY000
2025-12-21 13:58:42.261 ERROR [http-nio-8080-exec-8] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=105) Record has changed since last read in table 'movies'
2025-12-21 13:58:42.261 ERROR [http-nio-8080-exec-4] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=109) Record has changed since last read in table 'movies'
2025-12-21 13:58:42.261 ERROR [http-nio-8080-exec-9] o.h.e.jdbc.spi.SqlExceptionHelper - (conn=106) Record has changed since last read in table 'movies'
2025-12-21 13:59:36.636 INFO  [http-nio-8080-exec-3] c.e.moviehub.service.SyncService - Sync finished: 122 upserts (GHIBLI=22, TMDB=100)
2025-12-21 14:14:04.877 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-12-21 14:14:04.878 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@61defefb]]
2025-12-21 14:14:04.879 INFO  [SpringApplicationShutdownHook] o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-12-21 14:14:04.911 INFO  [SpringApplicationShutdownHook] o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-21 14:14:04.920 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-12-21 14:14:04.937 INFO  [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
